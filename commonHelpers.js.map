{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const crateGalleryCardTemplate = imgInfo => {\n  return `\n    <li class = \"gallery-card\">\n      <div class=\"image-container\">\n          <a href=\"${imgInfo.largeImageURL}\" class=\"original-image-link\">\n            <img class =\"gallery-image\" src=\"${imgInfo.webformatURL}\" alt =\"${imgInfo.tags}\"/>\n          </a>\n          <div class =\"gallery-image-info-container\">\n            <div class = \"gallery-image-info\">\n                <p class =\"gallery-text\">Likes</p>\n                <p class = \"gallery-value\">${imgInfo.likes}</p>\n            </div>\n            <div class = \"gallery-image-info\">\n              <p class =\"gallery-text\">Views</p>\n              <p class = \"gallery-value\">${imgInfo.views}</p>\n            </div>\n            <div class = \"gallery-image-info\">\n              <p class =\"gallery-text\">Comments</p>\n              <p class = \"gallery-value\">${imgInfo.comments}</p>\n            </div>\n            <div class = \"gallery-image-info\">\n              <p class =\"gallery-text\">Downloads</p>\n              <p class = \"gallery-value\">${imgInfo.downloads}</p>\n            </div>\n          </div>\n      </div>\n    </li>\n    `;\n};\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api';\nconst USER_KEY = '45503766-d567cf30782da5aa373afc201';\n\nexport const getPhotos = (searchQuery, currentPage) => {\n  const axiosOptions = {\n    params: {\n      key: USER_KEY,\n      q: searchQuery,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page: currentPage,\n    },\n  };\n  return axios.get(`/`, axiosOptions);\n};\n","import { crateGalleryCardTemplate } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport { getPhotos } from './js/pixabay-api.js';\n\nconst _searchFormEl = document.querySelector('.form');\nconst _serachedInput = document.querySelector('.form input');\nconst _galleryListEl = document.querySelector('.gallery-list');\nconst _mainLoader = document.querySelector('.main-load-wrapper .loader');\nconst _loadMoreBtn = document.querySelector('.loadMoreBtn');\nconst _loadMoreWrapperLoader = document.querySelector(\n  '.load-more-wrapper .loader'\n);\n\nlet _currentPage = 1;\nlet searchedValue;\n\nconst createSimpleLightBox = () => {\n  return new SimpleLightbox('.image-container a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n    overlayOpacity: 0.8,\n  });\n};\n\nconst lightBox = createSimpleLightBox();\n\nconst renderPhotos = async event => {\n  event.preventDefault();\n\n  _galleryListEl.innerHTML = '';\n  searchedValue = _searchFormEl.elements.user_query.value.trim();\n\n  try {\n    _mainLoader.classList.remove('visually-hidden');\n    _loadMoreBtn.classList.add('visually-hidden');\n    const response = await getPhotos(searchedValue, _currentPage);\n    _searchFormEl.reset();\n    _mainLoader.classList.add('visually-hidden');\n    let responseDataArray = response.data.hits;\n    if (searchedValue === '') {\n      iziToast.error({\n        title: 'Error',\n        message: 'Please fill input field',\n        position: 'topRight',\n      });\n      return;\n    }\n    if (responseDataArray.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry,there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      _loadMoreBtn.classList.add('visually-hidden');\n      _galleryListEl.innerHTML = '';\n      _searchFormEl.reset();\n      return;\n    }\n\n    const galleryCardTemplate = responseDataArray\n      .map(image => crateGalleryCardTemplate(image))\n      .join('');\n    _galleryListEl.insertAdjacentHTML('afterbegin', galleryCardTemplate);\n\n    lightBox.refresh();\n    _loadMoreBtn.classList.remove('visually-hidden');\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please check your internet connection and try again!',\n      position: 'topRight',\n    });\n    _serachedInput.textContent = '';\n    _mainLoader.classList.add('visually-hidden');\n    _loadMoreBtn.classList.add('visually-hidden');\n  }\n};\n\nconst onLoadMoreBtn = async () => {\n  const firstImageElement = document.querySelector('.gallery-list li');\n  try {\n    _currentPage++;\n    _loadMoreBtn.classList.add('visually-hidden');\n    _loadMoreWrapperLoader.classList.remove('visually-hidden');\n    const response = await getPhotos(searchedValue, _currentPage);\n\n    let responseHitsArray = response.data.hits;\n    let responseTotalHits = response.data.totalHits;\n    let totalPages = Math.ceil(responseTotalHits / responseHitsArray.length);\n\n    if (_currentPage >= totalPages) {\n      iziToast.info({\n        title: 'info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n      _loadMoreWrapperLoader.classList.add('visually-hidden');\n      _loadMoreBtn.classList.add('visually-hidden');\n      return;\n    } else {\n      const galleryCardTemplate = responseHitsArray\n        .map(image => crateGalleryCardTemplate(image))\n        .join('');\n      _galleryListEl.insertAdjacentHTML('beforeend', galleryCardTemplate);\n\n      _loadMoreWrapperLoader.classList.add('visually-hidden');\n      _loadMoreBtn.classList.remove('visually-hidden');\n\n      let boundingRect = firstImageElement.getBoundingClientRect();\n      console.log(boundingRect);\n      window.scrollBy({\n        top: boundingRect.top * boundingRect.y,\n        behavior: 'smooth',\n      });\n      console.log(boundingRect);\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please check your internet connection and try again!',\n      position: 'topRight',\n    });\n    _searchFormEl.elements.user_query.value = '';\n    _loadMoreWrapperLoader.classList.add('visually-hidden');\n    _loadMoreBtn.classList.remove('visually-hidden');\n  }\n};\n\n_searchFormEl.addEventListener('submit', renderPhotos);\n\n_loadMoreBtn.addEventListener('click', onLoadMoreBtn);\n"],"names":["crateGalleryCardTemplate","imgInfo","axios","USER_KEY","getPhotos","searchQuery","currentPage","axiosOptions","_searchFormEl","_serachedInput","_galleryListEl","_mainLoader","_loadMoreBtn","_loadMoreWrapperLoader","_currentPage","searchedValue","createSimpleLightBox","SimpleLightbox","lightBox","renderPhotos","event","response","responseDataArray","iziToast","galleryCardTemplate","image","onLoadMoreBtn","firstImageElement","responseHitsArray","responseTotalHits","totalPages","boundingRect"],"mappings":"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"}