{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const crateGalleryCardTemplate = imgInfo => {\n  return `\n    <li class = \"gallery-card\">\n      <div class=\"image-container\">\n          <a href=\"${imgInfo.largeImageURL}\" class=\"original-image-link\">\n            <img class =\"gallery-image\" src=\"${imgInfo.webformatURL}\" alt =\"${imgInfo.tags}\"/>\n          </a>\n          <div class =\"gallery-image-info-container\">\n            <div class = \"gallery-image-info\">\n                <p class =\"gallery-text\">Likes</p>\n                <p class = \"gallery-value\">${imgInfo.likes}</p>\n            </div>\n            <div class = \"gallery-image-info\">\n              <p class =\"gallery-text\">Views</p>\n              <p class = \"gallery-value\">${imgInfo.views}</p>\n            </div>\n            <div class = \"gallery-image-info\">\n              <p class =\"gallery-text\">Comments</p>\n              <p class = \"gallery-value\">${imgInfo.comments}</p>\n            </div>\n            <div class = \"gallery-image-info\">\n              <p class =\"gallery-text\">Downloads</p>\n              <p class = \"gallery-value\">${imgInfo.downloads}</p>\n            </div>\n          </div>\n      </div>\n    </li>\n    `;\n};\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api';\nconst USER_KEY = '45503766-d567cf30782da5aa373afc201';\n\nexport const getPhotos = async (searchQuery, currentPage) => {\n  const axiosOptions = {\n    params: {\n      key: USER_KEY,\n      q: searchQuery,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page: currentPage,\n    },\n  };\n  return await axios.get(`/`, axiosOptions);\n};\n","import { crateGalleryCardTemplate } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport { getPhotos } from './js/pixabay-api.js';\n\nconst searchFormEl = document.querySelector('.form');\nconst serachedInput = document.querySelector('.form input');\nconst galleryListEl = document.querySelector('.gallery-list');\nconst mainLoader = document.querySelector('.main-load-wrapper .loader');\nconst loadMoreBtn = document.querySelector('.loadMoreBtn');\nconst loadMoreWrapperLoader = document.querySelector(\n  '.load-more-wrapper .loader'\n);\n\nlet currentPage = 1;\nlet searchedValue = '';\n\nconst createSimpleLightBox = () => {\n  return new SimpleLightbox('.image-container a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n    overlayOpacity: 0.8,\n  });\n};\n\nconst lightBox = createSimpleLightBox();\n\nconst renderPhotos = async event => {\n  event.preventDefault();\n  currentPage = 1;\n\n  galleryListEl.innerHTML = '';\n  searchedValue = searchFormEl.elements.user_query.value.trim();\n\n  try {\n    mainLoader.classList.remove('visually-hidden');\n    const response = await getPhotos(searchedValue, currentPage);\n    searchFormEl.reset();\n    mainLoader.classList.add('visually-hidden');\n    let responseDataArray = response.data.hits;\n    if (searchedValue === '') {\n      iziToast.error({\n        title: 'Error',\n        message: 'Please fill input field',\n        position: 'topRight',\n      });\n      return;\n    }\n    if (responseDataArray.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry,there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      loadMoreBtn.classList.add('visually-hidden');\n      galleryListEl.innerHTML = '';\n      searchFormEl.reset();\n      return;\n    }\n\n    const galleryCardTemplate = responseDataArray\n      .map(image => crateGalleryCardTemplate(image))\n      .join('');\n    galleryListEl.insertAdjacentHTML('afterbegin', galleryCardTemplate);\n\n    lightBox.refresh();\n    loadMoreBtn.classList.remove('visually-hidden');\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please check your internet connection and try again!',\n      position: 'topRight',\n    });\n    serachedInput.textContent = '';\n    mainLoader.classList.add('visually-hidden');\n  }\n};\n\nconst onLoadMoreBtn = async () => {\n  currentPage++;\n  console.log(currentPage);\n\n  try {\n    loadMoreBtn.classList.add('visually-hidden');\n    loadMoreWrapperLoader.classList.remove('visually-hidden');\n    const response = await getPhotos(searchedValue, currentPage);\n\n    loadMoreBtn.classList.remove('visually-hidden');\n    loadMoreWrapperLoader.classList.add('visually-hidden');\n    let responseHitsArray = response.data.hits;\n    let responseTotalHits = response.data.totalHits;\n    const loadedImagesCount = currentPage * 15;\n\n    if (loadedImagesCount >= responseTotalHits) {\n      iziToast.info({\n        title: 'info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n      loadMoreWrapperLoader.classList.add('visually-hidden');\n      loadMoreBtn.classList.add('visually-hidden');\n    }\n    loadMoreWrapperLoader.classList.add('visually-hidden');\n    const galleryCardTemplate = responseHitsArray\n      .map(image => crateGalleryCardTemplate(image))\n      .join('');\n    galleryListEl.insertAdjacentHTML('beforeend', galleryCardTemplate);\n    makeScroll();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please check your internet connection and try again!',\n      position: 'topRight',\n    });\n    searchFormEl.elements.user_query.value = '';\n    loadMoreWrapperLoader.classList.add('visually-hidden');\n    loadMoreBtn.classList.remove('visually-hidden');\n  }\n};\n\nfunction makeScroll() {\n  const firstImageElement = document.querySelector('.gallery-list li');\n  let boundingRect = firstImageElement.getBoundingClientRect();\n  window.scrollBy({\n    top: boundingRect.top * boundingRect.y,\n    behavior: 'smooth',\n  });\n}\n\nsearchFormEl.addEventListener('submit', renderPhotos);\n\nloadMoreBtn.addEventListener('click', onLoadMoreBtn);\n"],"names":["crateGalleryCardTemplate","imgInfo","axios","USER_KEY","getPhotos","searchQuery","currentPage","axiosOptions","searchFormEl","serachedInput","galleryListEl","mainLoader","loadMoreBtn","loadMoreWrapperLoader","searchedValue","createSimpleLightBox","SimpleLightbox","lightBox","renderPhotos","event","response","responseDataArray","iziToast","galleryCardTemplate","image","onLoadMoreBtn","responseHitsArray","responseTotalHits","makeScroll","boundingRect"],"mappings":"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"}