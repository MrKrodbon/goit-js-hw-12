{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const crateGalleryCardTemplate = imgInfo => {\n  return `\n    <li class = \"gallery-card\">\n      <div class=\"image-container\">\n          <a href=\"${imgInfo.largeImageURL}\" class=\"original-image-link\">\n            <img class =\"gallery-image\" src=\"${imgInfo.webformatURL}\" alt =\"${imgInfo.tags}\"/>\n          </a>\n          <div class =\"gallery-image-info-container\">\n            <div class = \"gallery-image-info\">\n                <p class =\"gallery-text\">Likes</p>\n                <p class = \"gallery-value\">${imgInfo.likes}</p>\n            </div>\n            <div class = \"gallery-image-info\">\n              <p class =\"gallery-text\">Views</p>\n              <p class = \"gallery-value\">${imgInfo.views}</p>\n            </div>\n            <div class = \"gallery-image-info\">\n              <p class =\"gallery-text\">Comments</p>\n              <p class = \"gallery-value\">${imgInfo.comments}</p>\n            </div>\n            <div class = \"gallery-image-info\">\n              <p class =\"gallery-text\">Downloads</p>\n              <p class = \"gallery-value\">${imgInfo.downloads}</p>\n            </div>\n          </div>\n      </div>\n    </li>\n    `;\n};\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api';\nconst USER_KEY = '45503766-d567cf30782da5aa373afc201';\n\nexport const getPhotos = async (searchQuery, currentPage) => {\n  const axiosOptions = {\n    params: {\n      key: USER_KEY,\n      q: searchQuery,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page: currentPage,\n    },\n  };\n  return await axios.get(`/`, axiosOptions);\n};\n","import { crateGalleryCardTemplate } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport { getPhotos } from './js/pixabay-api.js';\n\nconst searchFormEl = document.querySelector('.form');\nconst serachedInput = document.querySelector('.form input');\nconst galleryListEl = document.querySelector('.gallery-list');\nconst mainLoader = document.querySelector('.main-load-wrapper .loader');\nconst loadMoreBtn = document.querySelector('.loadMoreBtn');\nconst loadMoreWrapperLoader = document.querySelector(\n  '.load-more-wrapper .loader'\n);\n\nlet currentPage = 1;\nlet searchedValue;\nlet totalHits;\nlet responseHitsArray;\n\nconst createSimpleLightBox = () => {\n  return new SimpleLightbox('.image-container a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n    overlayOpacity: 0.8,\n  });\n};\n\nconst lightBox = createSimpleLightBox();\n\nconst renderPhotos = async event => {\n  event.preventDefault();\n\n  galleryListEl.innerHTML = '';\n  searchedValue = searchFormEl.elements.user_query.value.trim();\n\n  if (searchedValue === '') {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please fill input field',\n      position: 'topRight',\n    });\n    mainLoader.classList.add('visually-hidden');\n    loadMoreBtn.classList.add('visually-hidden');\n    return;\n  } else {\n    try {\n      currentPage = 1;\n      mainLoader.classList.remove('visually-hidden');\n      loadMoreBtn.classList.add('visually-hidden');\n      const response = await getPhotos(searchedValue, currentPage);\n      totalHits = response.data.totalHits;\n      searchFormEl.reset();\n      mainLoader.classList.add('visually-hidden');\n      responseHitsArray = response.data.hits;\n\n      if (responseHitsArray.length === 0) {\n        iziToast.error({\n          title: 'Error',\n          message:\n            'Sorry,there are no images matching your search query. Please try again!',\n          position: 'topRight',\n        });\n        loadMoreBtn.classList.add('visually-hidden');\n        galleryListEl.innerHTML = '';\n        searchFormEl.reset();\n        return;\n      }\n\n      if (responseHitsArray.length < 15) {\n        loadMoreBtn.classList.add('visually-hidden');\n      } else {\n        loadMoreBtn.classList.remove('visually-hidden');\n      }\n      const galleryCardTemplate = responseHitsArray\n        .map(image => crateGalleryCardTemplate(image))\n        .join('');\n      galleryListEl.insertAdjacentHTML('afterbegin', galleryCardTemplate);\n\n      lightBox.refresh();\n    } catch (error) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Please check your internet connection and try again!',\n        position: 'topRight',\n      });\n      serachedInput.textContent = '';\n      mainLoader.classList.add('visually-hidden');\n      loadMoreBtn.classList.add('visually-hidden');\n    }\n  }\n};\n\nconst onLoadMoreBtn = async () => {\n  try {\n    currentPage++;\n    loadMoreBtn.classList.add('visually-hidden');\n    loadMoreWrapperLoader.classList.remove('visually-hidden');\n    const response = await getPhotos(searchedValue, currentPage);\n    loadMoreBtn.classList.remove('visually-hidden');\n    loadMoreWrapperLoader.classList.add('visually-hidden');\n    responseHitsArray = response.data.hits;\n    totalHits = response.data.totalHits;\n    let loadedPhotosCount = currentPage * 15;\n    if (loadedPhotosCount >= totalHits) {\n      iziToast.info({\n        title: 'info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n      loadMoreWrapperLoader.classList.add('visually-hidden');\n      loadMoreBtn.classList.add('visually-hidden');\n      currentPage = 1;\n    }\n\n    const galleryCardTemplate = responseHitsArray\n      .map(image => crateGalleryCardTemplate(image))\n      .join('');\n    galleryListEl.insertAdjacentHTML('beforeend', galleryCardTemplate);\n\n    makeScroll();\n    lightBox.refresh();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please check your internet connection and try again!',\n      position: 'topRight',\n    });\n    searchFormEl.elements.user_query.value = '';\n    currentPage = 1;\n    loadMoreWrapperLoader.classList.add('visually-hidden');\n    loadMoreBtn.classList.remove('visually-hidden');\n  }\n};\n\nfunction makeScroll() {\n  const boundingRect = document\n    .querySelector('.gallery-list li')\n    .getBoundingClientRect();\n\n  window.scrollBy({\n    top: boundingRect.height * 2,\n    behavior: 'smooth',\n  });\n}\n\nsearchFormEl.addEventListener('submit', renderPhotos);\n\nloadMoreBtn.addEventListener('click', onLoadMoreBtn);\n"],"names":["crateGalleryCardTemplate","imgInfo","axios","USER_KEY","getPhotos","searchQuery","currentPage","axiosOptions","searchFormEl","serachedInput","galleryListEl","mainLoader","loadMoreBtn","loadMoreWrapperLoader","searchedValue","totalHits","responseHitsArray","createSimpleLightBox","SimpleLightbox","lightBox","renderPhotos","event","iziToast","response","galleryCardTemplate","image","onLoadMoreBtn","makeScroll","boundingRect"],"mappings":"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"}